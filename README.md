# BlockChain-Knowledge

> 区块链相关知识


## 比特币

> 被誉为“未来的世界货币”。



### 比特币技术

##### 密码学

* 哈希算法：对结果的准确性进行验证，常见的有MD5、SHA-256等。

* 非对称加密：私钥、公钥，常见的有RSA算法、椭圆曲线算法(ECC)

* 数字签名：证明发送者


##### 网络架构

* 去中心化：每个人都有完整的账本，没有任何人拥有唯一的决定权。

* P2P架构


### 挖矿

* 本质

比特币的本质就是一个`互相验证的公开记账系统`，而挖矿的本质就是`争夺记账权`。
是计算散列值并对算出最终结果的人给予比特币奖励。


* 意义

对于比特币系统而言，挖矿来获取比特币只是一个相对次要的目的，更重要的目的是通过这些计算来`确保比特币的正常交易并防止重复支付`，
简单来说就是防止有人作弊。挖矿的关键不是挖而是维护，产出比特币只是一个副产品而已，仅仅是为了奖励那些为维护比特币金融系统做出贡献的人。

所以，挖矿的意义并不是白白消耗电力和磨损硬件来做无意义的计算以获得比特币，而是**通过大量计算防止作弊，维护整个比特币系统的安全**。


* 内容

挖矿就是将过去一段时间内发生的、尚未经过网络公认的`交易信息收集、校验、确认`，
最后打包加密成为一个无法被篡改的`交易记录块`，从而成为这个比特币网络上公认的已经完成的交易记录，永久保存。

在比特币的世界里，大约每10分钟就会在公开账本上记录一个数据块，这个数据块里包含了这10分钟内全球被验证的交易。
所有的挖矿电脑都在尝试打包这个数据块并提交，但是以谁提交的为最终结果则是需要争夺的。


* 回报

最终成功生成交易记录块的人，可以获得伴随这些交易而生成的`交易费用`外加一笔`额外报酬`。
`交易费用`一般都是转出资金方自愿提供给挖矿者的，因此不是系统新增的货币。
`额外报酬`是新生成的比特币，这就是比特币系统新增货币的方式。

普通电脑的算力几乎没有任何机会抢到记账权。于是，矿工们就自己构建矿池模式，如果矿池抢到了记账权，那么就按照计算贡献来分配这次获得的收益。


* 抢夺记账权

抢夺记账权比的是：在10分钟内谁能`找到一个值`和`上一个数据块的哈希值`以及`10分钟内验证过的新交易记录`合起来可以`算出最小的哈希值`。
算出最小哈希值的人就得到了记账权，若10分钟之内没有抢到记账权，那之前的努力就白费了，拿到新的区块后会重新进入下一轮。

同时，至少要小于某个值才有`转发权`，这个值越小，对应的就是比特币网络的难度系数越高。


* 数据链条

之所以计算时要加上上一个数据块的哈希值，是因为这样所有的数据块就被组成了一条可以从前到后不断验证的数据链条。
修改中间任何一个数据块的任何交易记录，都会导致之后的所有数据块的哈希值验证失败。


* 挖矿的难度

挖矿的难度是`全网自动调整`的，其依据是之前若干数据块生成的平均速度：如果低于10分钟，就把难度提高，如果高于10分钟，就自动把难度降低。
`降低哈希值的下限`就能够提升难度。


* 确认

当找到一个可以算出达到标准的哈希值的数字后，就可以把算出的数据块广播出去，寻求其他矿工的认同。

对于一次比特币交易，如果你的交易单正好在这个数据块中，就意味着获得了依次确认。
比特币网络的规则是，若一笔交易获得了6次确认，就认为这个交易已经得到了全网的认同，可以认定为有效。
也就是说，每次转账需要6次才能确保绝对安全，而每次确认需要等待10分钟，所以需要一个小时才能确认成功。



### 特性

* 纯匿名：无法将账号和现实中的人对应起来。第一次从技术上保障了私人财产的神圣不可侵犯、不可追踪、不可冻结。

* 公开：若将比特币地址公开，可以根据比特币地址百分之百的追踪账户上的所有流水信息。

* 可证明：非对称数字签名技术可以轻易证明你拥有某个地址上的财富。只需要使用私钥加密一条消息并发布出来，就可以确认你对该账户的拥有权。

* 丢失不可找回：几乎不可破解。



### 比特币生态圈

##### 比特币流通链

* 开始（生成比特币地址/公钥/私钥）

* 购买（交易所/中间人）、挖矿（矿机/矿池）、接受他人转账

* 存储（在线钱包/离线钱包）：钱包服务

* 转账（需6次确认）、兑换（法币与比特币兑换）、兑付（兑换和支付）：电子商务、支付服务

* 比特币基金会、开源社区、比特币交易所、比特币信息和金融服务等



### 比特币的开放性


##### 交易行为的开放性

比特币鼓励交易层级的创新。比如`M-of-N`签名，这种交易允许用N个秘钥中的M个签名解锁。企业在动用资金时可以采用两个或更多签名解锁。

比特币通过协议的升级，可从目前的点对点交易转变为群对群的三方或多方交易，这对分布式合同具有重大意义。


##### 交易总账的开放性

比特币网络允许节点之间相互通信、转发交易、验证新的交易区块和生成新的比特币。
所有这些网络协议的交互，使得每个节点都可以构造出共享交易总账的一个完整的、一致的本地副本，即区块链。

这相当于三方记账法，即让第三方记录你的账目。因此，比如在募捐方面有用途。


##### 钱包数据的开放性

通过比特币客户端的远程过程调用中间协议（API）可将整个比特币经济公开。
这种API可以提供查询钱包、创建交易、创建新钱包等。你可以通过代码查询你的或者别人的账户余额。


### 应用扩展

##### 存在性证明

存在性证明是指把数据文档的SHA-256信息摘要嵌入比特币区块链来证明其存在性。

**原理还没看懂**

**应用**

* 在 不透漏实际数据的前提下展示数据所有权

* 证明某些数据在某一时刻的存在性

* 检查文件的完整性


##### 零知识有条件付款

> 零知识证明

即能证明自己是某项权益的拥有者，又不把有关信息泄露出去的方法就叫零知识证明，即提供给外界的`知识`为`零`。


##### 彩色币

通过跟踪一些特定比特币的来龙去脉，可以将它们与其他比特币区分开来，这些特定的比特币就叫做彩色币。

* 创世转账


##### 零币

零币可实现真正意义上的匿名性。
由于比特币可以追溯至这些比特币的终极起源，即区块生成后发送到的那个地址。这对个人隐私构成了极大威胁。

零币能够使得接收到的比特币与起初使用的比特币毫无关联。


##### 合并挖矿

`比特币工作量证明机制`是指在矿工挖矿时，`给区块补增一个随机数，并开展随机哈希运算，使得给定的区块的哈希值开头含有一定数量的零`。

```
信息:哈希值
message:asbofefhsd3rdcc
1message:caofvcnchkf3983
2message:sdfghrer234yrgf
......
nmessage:00deachx23dsku3
```

如果区块的数据是`message`,则给区块补增一个随机数，然后计算`随机数+区块数据`的哈希值，
当运算至`ssage`时，哈希值的开头有一定数量的零，符合转发要求，则`n`就是一个有效的随机数(nonce)。

只要将`nmessage`发送，接收器可以迅速通过哈希运算来验证它是否符合要求。

关键是该随机数可以是任何信息，因此可以将该随机数扩展成：`有意义的数据` + `随机数`，使这两部分作为随机数。

`有意义的数据`就可以有多中用途了，比如合并挖矿，即将另一个币的区块数据当成`有意义的数据`：

```
当A币和B币的难度相同时，可以同时哈希下列数据：
[A币的区块数据|B币的区块数据|公随机数]

当找到一个公随机数使得整体的哈希满足要求时，可以：
将[B币的区块数据|公随机数]作为[A币的区块数据]的随机数
将[A币的区块数据|公随机数]作为[B币的区块数据]的随机数
```


##### 分布式合同

能使人们在最小信任度的前提下达成合约。




